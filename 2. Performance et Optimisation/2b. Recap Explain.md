# Analyse des requêtes (EXPLAIN)

Pour optimiser les requêtes, il est essentiel de comprendre comment le moteur de base de données les exécute.

## 1. EXPLAIN et EXPLAIN ANALYZE

- `EXPLAIN` : Affiche le plan d'exécution prévu par l'optimiseur.
- `EXPLAIN ANALYZE` : Exécute réellement la requête et affiche les statistiques correspondantes.

```sql
EXPLAIN ANALYZE
SELECT
o.order_id,
o.order_purchase_timestamp,
SUM(oi.price + oi.freight_value) AS order_total
FROM olist_orders_dataset o
JOIN olist_order_items_dataset oi ON oi.order_id = o.order_id
WHERE o.customer_id = '9ef432eb6251297304e76186b10a928d'
GROUP BY o.order_id, o.order_purchase_timestamp
ORDER BY o.order_purchase_timestamp DESC;
```

## 2. Analyse séquentielle (Seq Scan) vs. Analyse par index (Index Scan)

- **Analyse séquentielle** : Lit l'intégralité de la table (plus lente avec des millions de lignes).

- **Analyse d'index** : Utilise un index pour un accès ciblé presque instantané.
